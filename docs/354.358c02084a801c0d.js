"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[354],{8354:(W,f,o)=>{o.r(f),o.d(f,{AuthModule:()=>D});var c=o(6895),u=o(2582),a=o(4006),y=o(7450),e=o(4650),d=o(4004),m=o(2340),g=o(529);let h=(()=>{class n{constructor(t){this.http=t,this._emailPattern="[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$",this._passwordPattern="(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}"}checkIdentifier(t){return this.http.get(`${m.N.laravelApiURL}/user?username=${t}`).pipe((0,d.U)(i=>0===i.length?-1:i[0].id))}checkUser(t,i){return this.http.get(`${m.N.laravelApiURL}/user?username=${t}`).pipe((0,d.U)(s=>{if(s[0]&&s[0].password===i)return s[0]}))}matchPasswords(t,i){return s=>{const l=s.get(t)?.value,p=s.get(i)?.value;return l!==p?(s.get(i)?.setErrors({mathPasswords:!0}),{mathPasswords:!0}):null}}invalidField(t,i){const s=i.get(t);return s?.touched&&s?.invalid}errorMessage(t,i){const s=i.get(t)?.errors;if(s?.required)return"Campo necesario";if(s?.minlength)return"Longitud insuficiente";if(s?.pattern)return"Formato incorrecto";switch(t){case"password2":if(s?.mathPasswords)return"Las contrase\xf1as no coinciden";break;case"username":if(s?.userExists)return"El usuario ya existe";break;case"email":if(s?.emailExists)return"El usuario con este email ya existe"}return""}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(g.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var C=o(1495),v=o(4247),Z=o(5593),x=o(1740),F=o(3425);function I(n,r){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.errorMessage("identifier"))}}function S(n,r){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.errorMessage("password"))}}function J(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1,"Datos incorrectos o el usuario no existe"),e.qZA())}let q=(()=>{class n{constructor(t,i,s,l){this.fb=t,this.validations=i,this.router=s,this.store=l,this.signinForm=this.fb.group({identifier:["",[a.kI.required,a.kI.minLength(3)]],password:["",[a.kI.required]]})}invalidField(t){return this.validations.invalidField(t,this.signinForm)}errorMessage(t){return this.validations.errorMessage(t,this.signinForm)}signIn(){if(this.signinForm.valid){const t=this.signinForm.get("identifier")?.value,i=this.signinForm.get("password")?.value;this.store.dispatch((0,y.x4)({email:t,password:i})),this.router.navigate(["./movie/all"])}else this.signinForm.markAllAsTouched()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.qu),e.Y36(h),e.Y36(u.F0),e.Y36(C.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-signin"]],decls:23,vars:5,consts:[[1,"mt-3","mb-6",2,"width","250px","margin","0 auto","text-align","center"],[1,"p-fluid","grid",3,"formGroup","keyup.enter"],[1,"field","col-12","mt-3"],[1,"p-float-label"],["type","text","id","inputtext","pInputText","","formControlName","identifier","required",""],["for","inputtext"],[1,"p-error","block",2,"height","7px"],[4,"ngIf"],[1,"field","col-12"],["type","password","id","inputpassword","pPassword","","formControlName","password","required","",3,"feedback"],["for","inputpassword"],["pButton","","pRipple","","type","button","label","Entrar",1,"p-button-rounded",3,"click"],[1,"col-12","mt-1",2,"height","15px"],[1,"p-error","block"]],template:function(t,i){1&t&&(e.TgZ(0,"main",0)(1,"p-card")(2,"h1"),e._uU(3,"Inicio de sesi\xf3n"),e.qZA(),e.TgZ(4,"form",1),e.NdJ("keyup.enter",function(){return i.signIn()}),e.TgZ(5,"div",2)(6,"span",3),e._UZ(7,"input",4),e.TgZ(8,"label",5),e._uU(9,"Email"),e.qZA()(),e.TgZ(10,"small",6),e.YNc(11,I,2,1,"span",7),e.qZA()(),e.TgZ(12,"div",8)(13,"span",3),e._UZ(14,"input",9),e.TgZ(15,"label",10),e._uU(16,"Contrase\xf1a"),e.qZA()(),e.TgZ(17,"small",6),e.YNc(18,S,2,1,"span",7),e.qZA()(),e.TgZ(19,"button",11),e.NdJ("click",function(){return i.signIn()}),e.qZA(),e.TgZ(20,"div",12)(21,"small",13),e.YNc(22,J,2,0,"span",7),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("formGroup",i.signinForm),e.xp6(7),e.Q6J("ngIf",i.invalidField("identifier")),e.xp6(3),e.Q6J("feedback",!1),e.xp6(4),e.Q6J("ngIf",i.invalidField("password")),e.xp6(4),e.Q6J("ngIf",null==i.signinForm.errors?null:i.signinForm.errors.accessFail))},dependencies:[c.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,v.Z,Z.Hq,x.o,F.QK]}),n})();var N=o(6518),T=o(4986),Y=o(7272),A=o(5698),k=o(8502),M=o(9718),Q=o(5577);function U(n,r){return r?t=>(0,Y.z)(r.pipe((0,A.q)(1),(0,k.l)()),t.pipe(U(n))):(0,Q.z)((t,i)=>n(t,i).pipe((0,A.q)(1),(0,M.h)(t)))}var E=o(8306),z=o(3532),V=o(1165);function w(n,r=T.z){const t=function b(n=0,r,t=T.P){let i=-1;return null!=r&&((0,z.K)(r)?t=r:i=r),new E.y(s=>{let l=(0,V.q)(n)?+n-t.now():n;l<0&&(l=0);let p=0;return t.schedule(function(){s.closed||(s.next(p++),0<=i?this.schedule(void 0,i):s.complete())},l)})}(n,r);return U(()=>t)}let L=(()=>{class n{constructor(t){this.http=t}validate(t){return this.http.get(`${m.N.laravelApiURL}/user?username=${t.value}`).pipe(w(500),(0,d.U)(i=>(console.log("\u{1f680} ~ file: email-validator.service.ts ~ line 23 ~ EmailValidatorService ~ validate ~ resp",i),0!==i.length?{userExists:!0}:null)))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(g.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),P=(()=>{class n{constructor(t){this.http=t}validate(t){return this.http.get(`${m.N.laravelApiURL}/user?email=${t.value}`).pipe(w(500),(0,d.U)(i=>(console.log("\u{1f680} ~ file: email-validator.service.ts ~ line 23 ~ EmailValidatorService ~ validate ~ resp",i),null)))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(g.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function R(n,r){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.errorMessage("username"))}}function $(n,r){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.errorMessage("email"))}}function B(n,r){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.errorMessage("password"))}}function O(n,r){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.errorMessage("password_confirmation"))}}const G=[{path:"",children:[{path:"signup",component:(()=>{class n{constructor(t,i,s,l,p,H){this.fb=t,this.as=i,this.usernameValidator=s,this.emailValidator=l,this.validations=p,this.router=H,this.registerForm=this.fb.group({username:["",[a.kI.required,a.kI.minLength(3)],[this.usernameValidator]],email:["",[a.kI.required,a.kI.pattern(this.validations._emailPattern)],[this.emailValidator]],password:["",[a.kI.required,a.kI.pattern(this.validations._passwordPattern)]],password_confirmation:["",[a.kI.required]]},{validators:[this.validations.matchPasswords("password","password_confirmation")]})}invalidField(t){return this.validations.invalidField(t,this.registerForm)}errorMessage(t){return this.validations.errorMessage(t,this.registerForm)}signUp(){this.registerForm.valid&&this.as.register(this.registerForm.value).subscribe({next:({})=>{this.router.navigate(["./movie/all"])}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.qu),e.Y36(N.e),e.Y36(L),e.Y36(P),e.Y36(h),e.Y36(u.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-signup"]],decls:34,vars:8,consts:[[1,"mt-3","mb-6",2,"width","350px","margin","0 auto","text-align","center"],[1,"p-fluid","grid",3,"formGroup","keyup.enter"],[1,"field","col-12","mt-3"],[1,"p-float-label"],["type","text","id","inputtext","pInputText","","formControlName","username","required",""],["for","inputtext"],[1,"p-error","block",2,"height","7px"],[4,"ngIf"],["type","text","id","inputtext","pInputText","","formControlName","email","required",""],[1,"field","col-12"],["type","password","id","inputpassword","pPassword","","formControlName","password","required","",3,"feedback"],["for","inputpassword"],["type","password","id","inputpassword","pPassword","","formControlName","password_confirmation","required","",3,"feedback"],["pButton","","pRipple","","type","button","label","Registro",1,"p-button-rounded",3,"disabled","click"]],template:function(t,i){1&t&&(e.TgZ(0,"main",0)(1,"p-card")(2,"h1"),e._uU(3,"Registro"),e.qZA(),e.TgZ(4,"form",1),e.NdJ("keyup.enter",function(){return i.signUp()}),e.TgZ(5,"div",2)(6,"span",3),e._UZ(7,"input",4),e.TgZ(8,"label",5),e._uU(9,"Usuario"),e.qZA()(),e.TgZ(10,"small",6),e.YNc(11,R,2,1,"span",7),e.qZA()(),e.TgZ(12,"div",2)(13,"span",3),e._UZ(14,"input",8),e.TgZ(15,"label",5),e._uU(16,"Email"),e.qZA()(),e.TgZ(17,"small",6),e.YNc(18,$,2,1,"span",7),e.qZA()(),e.TgZ(19,"div",9)(20,"span",3),e._UZ(21,"input",10),e.TgZ(22,"label",11),e._uU(23,"Contrase\xf1a"),e.qZA()(),e.TgZ(24,"small",6),e.YNc(25,B,2,1,"span",7),e.qZA()(),e.TgZ(26,"div",9)(27,"span",3),e._UZ(28,"input",12),e.TgZ(29,"label",11),e._uU(30,"Indica otra vez tu contrase\xf1a"),e.qZA()(),e.TgZ(31,"small",6),e.YNc(32,O,2,1,"span",7),e.qZA()(),e.TgZ(33,"button",13),e.NdJ("click",function(){return i.signUp()}),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("formGroup",i.registerForm),e.xp6(7),e.Q6J("ngIf",i.invalidField("username")),e.xp6(7),e.Q6J("ngIf",i.invalidField("email")),e.xp6(3),e.Q6J("feedback",!1),e.xp6(4),e.Q6J("ngIf",i.invalidField("password")),e.xp6(3),e.Q6J("feedback",!1),e.xp6(4),e.Q6J("ngIf",i.invalidField("password_confirmation")),e.xp6(1),e.Q6J("disabled",!i.registerForm.valid||i.registerForm.pending))},dependencies:[c.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,v.Z,Z.Hq,x.o,F.QK]}),n})()},{path:"signin",component:q}]}];let j=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.Bz.forChild(G),u.Bz]}),n})();var K=o(4466),X=o(6860);let D=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,j,a.UX,K.m,X.W]}),n})()}}]);