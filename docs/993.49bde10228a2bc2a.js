"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[993],{9993:(b,_,o)=>{o.d(_,{z:()=>H});var r=o(6895),p=o(659),c=o(5246),t=o(4650),f=o(2022),d=o(805),T=o(1495),L=o(5593),g=o(2582),C=o(2453),m=o(8396),x=o(1493),E=o(1740),Z=o(1383),A=o(2137),M=o(3054),v=o(7913),u=o(4006);function D(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.openNew())}),t.qZA()}}function I(i,l){1&i&&(t.TgZ(0,"p-toolbar"),t.YNc(1,D,1,0,"ng-template",9),t.qZA())}function O(i,l){1&i&&(t.TgZ(0,"th",17),t._uU(1,"Autor "),t._UZ(2,"p-sortIcon",18),t.qZA())}function P(i,l){1&i&&(t.TgZ(0,"th",19),t._uU(1,"Modo "),t._UZ(2,"p-sortIcon",20),t.qZA())}function U(i,l){if(1&i&&(t.TgZ(0,"tr")(1,"th",11),t._uU(2,"Nombre "),t._UZ(3,"p-sortIcon",12),t.qZA(),t.TgZ(4,"th",13),t._uU(5,"Descripci\xf3n "),t._UZ(6,"p-sortIcon",14),t.qZA(),t.YNc(7,O,3,0,"th",15),t.YNc(8,P,3,0,"th",16),t._UZ(9,"th"),t.qZA()),2&i){const e=t.oxw();t.xp6(7),t.Q6J("ngIf",e.authorColumn),t.xp6(1),t.Q6J("ngIf",e.modeColumn)}}function N(i,l){if(1&i&&(t.TgZ(0,"td")(1,"span",26),t._uU(2),t.ALo(3,"titlecase"),t.qZA()()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink","/user/"+e.username),t.xp6(1),t.Oqu(t.lcZ(3,2,e.username))}}function R(i,l){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.public?"p\xfablico":"privado"))}}function B(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,a=t.oxw();return t.KtG(a.saveList(n))}),t.qZA()}}function J(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,a=t.oxw();return t.KtG(a.updateList(n))}),t.qZA()}}function w(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,a=t.oxw();return t.KtG(a.destroyList(n))}),t.qZA()}}function k(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,a=t.oxw();return t.KtG(a.deleteSavedList(n))}),t.qZA()}}function S(i,l){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"titlecase"),t.qZA(),t.YNc(7,N,4,4,"td",1),t.YNc(8,R,3,3,"td",1),t.TgZ(9,"td"),t._UZ(10,"button",21),t.YNc(11,B,1,0,"button",22),t.YNc(12,J,1,0,"button",23),t.YNc(13,w,1,0,"button",24),t.YNc(14,k,1,0,"button",25),t.qZA()()),2&i){const e=l.$implicit,s=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,9,e.title)),t.xp6(3),t.Oqu(t.lcZ(6,11,e.description)),t.xp6(2),t.Q6J("ngIf",s.authorColumn),t.xp6(1),t.Q6J("ngIf",s.modeColumn),t.xp6(2),t.Q6J("routerLink","/user/"+e.username+"/list/"+e.user_list_count),t.xp6(1),t.Q6J("ngIf",s.buttons.like&&e.username!==(null==s.userAuth?null:s.userAuth.username)),t.xp6(1),t.Q6J("ngIf",s.buttons.edit),t.xp6(1),t.Q6J("ngIf",s.buttons.delete&&!s.reservedLists.includes(e.user_list_count)),t.xp6(1),t.Q6J("ngIf",s.buttons.dislike)}}function K(i,l){if(1&i&&(t.TgZ(0,"a",34),t._uU(1,"Ver todas las listas"),t.qZA()),2&i){const e=t.oxw(3);t.Q6J("routerLink","/user/"+(null==e.userLists?null:e.userLists.username)+"/lists")}}function y(i,l){if(1&i&&(t.TgZ(0,"div",32),t._uU(1),t.YNc(2,K,2,1,"a",33),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" En total tienes ",e.lists?e.lists.length:0," listas."),t.xp6(1),t.Q6J("ngIf",!e.paginator)}}function Q(i,l){1&i&&t.YNc(0,y,3,2,"ng-template",31)}function Y(i,l){1&i&&(t.TgZ(0,"small",43),t._uU(1,"Title is required."),t.qZA())}function q(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",35)(1,"label",36),t._uU(2,"Title"),t.qZA(),t.TgZ(3,"input",37),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.list.title=n)}),t.qZA(),t.YNc(4,Y,2,0,"small",38),t.qZA(),t.TgZ(5,"div",35)(6,"label",39),t._uU(7,"Description"),t.qZA(),t.TgZ(8,"textarea",40),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.list.description=n)}),t.qZA()(),t.TgZ(9,"div",35)(10,"h5",41),t._uU(11,"P\xfablico"),t.qZA(),t.TgZ(12,"p-inputSwitch",42),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.list.public=n)}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.list.title)("disabled",e.reservedLists.includes(e.list.user_list_count)),t.xp6(1),t.Q6J("ngIf",e.submitted&&!e.list.title),t.xp6(4),t.Q6J("ngModel",e.list.description),t.xp6(4),t.Q6J("ngModel",e.list.public)}}function W(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.hideDialog())}),t.qZA(),t.TgZ(1,"button",45),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.storeList())}),t.qZA()}}const F=function(){return["title","description","author","public"]},h=function(){return{width:"450px"}};let H=(()=>{class i{constructor(e,s,n,a,$){this.ls=e,this.messageService=s,this.confirmationService=n,this.titleCasePipe=a,this.store=$,this.buttonAddList=!1,this.buttonEditList=!1,this.buttonDeleteList=!1,this.buttonDeleteSavedList=!1,this.authorColumn=!0,this.modeColumn=!0,this.rows=10,this.paginator=!0,this.list={},this.listDialog=!1,this.submitted=!1,this.reservedLists=[1,2,3,4,5,6,7,8,9,10],this.isLoggedIn=!1,this.isLoggedOut=!0,this.userAuth=void 0,this.subscriptions=[],this.buttons={create:!1,edit:!1,delete:!1,like:!1,dislike:!1}}ngOnInit(){this.subscriptions.push(this.store.select("auth").subscribe(({user:e,isLoggedIn:s})=>{this.userAuth=e,this.isLoggedIn=s,this.isLoggedOut=!s,this.buttons={...this.buttons,create:this.buttonAddList,edit:this.buttonEditList,delete:this.buttonDeleteList,like:this.isLoggedIn&&!this.buttonDeleteSavedList,dislike:this.buttonDeleteSavedList}}))}ngOnDestroy(){c.r(this.subscriptions)}openNew(){this.list={},this.submitted=!1,this.listDialog=!0}updateList(e){this.list={...e},this.listDialog=!0}destroyList(e){this.confirmationService.confirm({message:"\xbfEst\xe1s seguro de querer eliminar la lista "+e.title+"?",header:"Confirmar",icon:"pi pi-exclamation-triangle",acceptLabel:"Aceptar",rejectLabel:"Cancelar",accept:()=>{this.lists=this.lists?.filter(s=>s.id!==e.id),this.store.dispatch(p.SN({list:e})),this.messageService.add({severity:"success",summary:"Eliminado",detail:`Lista ${e.title} eliminada.`,life:3e3})}})}hideDialog(){this.listDialog=!1,this.submitted=!1}storeList(){this.submitted=!0,this.list.title.trim()&&(void 0!==this.list.id?(this.lists[this.findIndexById(this.list.id)]=this.list,this.store.dispatch(p.Du({list:this.list})),this.messageService.add({severity:"success",summary:"Actualizada",detail:"Lista actualizada",life:3e3})):(this.list.username=this.userAuth?.username,this.store.dispatch(p.$l({list:this.list})),this.lists.push(this.list),this.messageService.add({severity:"success",summary:"Creado",detail:`Lista ${this.list.title} creada.`,life:3e3})),this.showChanges())}showChanges(){this.listDialog=!1,this.list={}}saveList(e){this.ls.saveList(e).subscribe({next:s=>{this.messageService.add({severity:"success",summary:"Guardada",detail:`Lista ${e.title} de ${this.titleCasePipe.transform(e.username)} guardada.`,life:3e3})}})}deleteSavedList(e){this.confirmationService.confirm({message:"\xbfEst\xe1s seguro de querer eliminar la lista "+e.title+" de "+this.titleCasePipe.transform(e.username)+" de tu colecci\xf3n?",header:"Confirmar",icon:"pi pi-exclamation-triangle",acceptLabel:"Aceptar",rejectLabel:"Cancelar",accept:()=>{this.lists=this.lists?.filter(s=>s.id!==e.id),this.ls.deleteSavedList(e),this.messageService.add({severity:"success",summary:"Eliminado",detail:`Lista ${e.title} eliminada.`,life:3e3})}})}findIndexById(e){let s=-1;for(let n=0;n<this.lists.length;n++)if(this.lists[n].id==e){s=n;break}return s}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.X),t.Y36(d.ez),t.Y36(d.YP),t.Y36(r.rS),t.Y36(T.yh))},i.\u0275cmp=t.Xpm({type:i,selectors:[["component-list-table"]],inputs:{lists:"lists",userLists:"userLists",buttonAddList:"buttonAddList",buttonEditList:"buttonEditList",buttonDeleteList:"buttonDeleteList",buttonDeleteSavedList:"buttonDeleteSavedList",authorColumn:"authorColumn",modeColumn:"modeColumn",rows:"rows",paginator:"paginator"},features:[t._Bn([r.rS])],decls:12,vars:17,consts:[[1,"card","col-12","mb-3"],[4,"ngIf"],["responsiveLayout","scroll","dataKey","id","currentPageReportTemplate","Mostrando desde la lista {first} a la {last} de {totalRecords} listas.",3,"value","rows","paginator","globalFilterFields","rowHover","showCurrentPageReport"],["dt",""],["pTemplate","header"],["pTemplate","body"],["header","Datos de la lista","styleClass","p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["pTemplate","left"],["pButton","","pRipple","","label","Nueva lista","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pSortableColumn","title"],["field","title"],["pSortableColumn","description"],["field","description"],["pSortableColumn","author",4,"ngIf"],["pSortableColumn","public",4,"ngIf"],["pSortableColumn","author"],["field","author"],["pSortableColumn","public"],["field","public"],["pButton","","pRipple","","icon","pi pi-eye",1,"p-button-rounded","mr-2",3,"routerLink"],["pButton","","pRipple","","icon","pi pi-heart","class","p-button-rounded p-button-warning mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-pencil","class","p-button-rounded p-button-success mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash","class","p-button-rounded p-button-warning",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash","class","p-button-rounded p-button-danger",3,"click",4,"ngIf"],[1,"author",3,"routerLink"],["pButton","","pRipple","","icon","pi pi-heart",1,"p-button-rounded","p-button-warning","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"],["pTemplate","summary"],[1,"flex","align-items-center","justify-content-between"],[3,"routerLink",4,"ngIf"],[3,"routerLink"],[1,"field"],["for","title"],["type","text","pInputText","","id","title","required","","autofocus","",3,"ngModel","disabled","ngModelChange"],["class","p-error",4,"ngIf"],["for","description"],["id","description","pInputTextarea","","required","","rows","3","cols","20",3,"ngModel","ngModelChange"],[1,"m-0","mb-1"],[3,"ngModel","ngModelChange"],[1,"p-error"],["pButton","","pRipple","","label","Cancelar","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Guardar","icon","pi pi-check",1,"p-button-text",3,"click"]],template:function(e,s){1&e&&(t._UZ(0,"p-toast"),t.TgZ(1,"div",0),t.YNc(2,I,2,0,"p-toolbar",1),t.TgZ(3,"p-table",2,3),t.YNc(5,U,10,2,"ng-template",4),t.YNc(6,S,15,13,"ng-template",5),t.YNc(7,Q,1,0,null,1),t.qZA()(),t.TgZ(8,"p-dialog",6),t.NdJ("visibleChange",function(a){return s.listDialog=a}),t.YNc(9,q,13,5,"ng-template",7),t.YNc(10,W,2,0,"ng-template",8),t.qZA(),t._UZ(11,"p-confirmDialog")),2&e&&(t.xp6(2),t.Q6J("ngIf",s.buttons.create),t.xp6(1),t.Q6J("value",s.lists)("rows",s.rows)("paginator",s.paginator)("globalFilterFields",t.DdM(14,F))("rowHover",!0)("showCurrentPageReport",!0),t.xp6(4),t.Q6J("ngIf",null==s.userLists?null:s.userLists.username),t.xp6(1),t.Akn(t.DdM(15,h)),t.Q6J("visible",s.listDialog)("modal",!0),t.xp6(3),t.Akn(t.DdM(16,h)))},dependencies:[r.O5,d.jx,L.Hq,g.rH,g.yS,C.FN,m.iA,m.lQ,m.fz,x.V,E.o,Z.o,A.Q,M.g,v.Ql,u.Fj,u.JJ,u.Q7,u.On,r.rS],styles:["[_nghost-%COMP%]     .author{cursor:pointer}[_nghost-%COMP%]     .author:hover{color:#848888}"]}),i})()},5246:(b,_,o)=>{o.d(_,{r:()=>r});const r=p=>{p.forEach(c=>c.unsubscribe())}}}]);