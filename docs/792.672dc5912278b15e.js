"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[792],{3792:(Nt,x,l)=>{l.r(x),l.d(x,{UserModule:()=>Dt});var u=l(6895),a=l(4006),c=l(1740),b=l(9646),Z=l(8372),y=l(3900),J=l(4128),Y=l(4813),M=l(8505),D=l(262),F=l(7450),t=l(4650),_=l(3937),h=l(2022),g=l(1495),C=l(659);const A=s=>{s.forEach(n=>n.unsubscribe())};var d=l(805),T=l(5593),N=l(2453),m=l(8396),S=l(1493),O=l(5014),Q=l(1383),R=l(2137),U=l(3054),q=l(7913);function B(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.openNew())}),t.qZA()}}function E(s,n){1&s&&(t.TgZ(0,"p-toolbar"),t.YNc(1,B,1,0,"ng-template",9),t.qZA())}function P(s,n){1&s&&(t.TgZ(0,"th",17),t._uU(1,"Autor "),t._UZ(2,"p-sortIcon",18),t.qZA())}function k(s,n){1&s&&(t.TgZ(0,"th",19),t._uU(1,"Modo "),t._UZ(2,"p-sortIcon",20),t.qZA())}function G(s,n){if(1&s&&(t.TgZ(0,"tr")(1,"th",11),t._uU(2,"Nombre "),t._UZ(3,"p-sortIcon",12),t.qZA(),t.TgZ(4,"th",13),t._uU(5,"Descripci\xf3n "),t._UZ(6,"p-sortIcon",14),t.qZA(),t.YNc(7,P,3,0,"th",15),t.YNc(8,k,3,0,"th",16),t._UZ(9,"th"),t.qZA()),2&s){const e=t.oxw();t.xp6(7),t.Q6J("ngIf",e.authorColumn),t.xp6(1),t.Q6J("ngIf",e.modeColumn)}}function H(s,n){if(1&s&&(t.TgZ(0,"td")(1,"span",26),t._uU(2),t.ALo(3,"titlecase"),t.qZA()()),2&s){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink","/user/"+e.username),t.xp6(1),t.Oqu(t.lcZ(3,2,e.username))}}function z(s,n){if(1&s&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&s){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.public?"p\xfablico":"privado"))}}function $(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,r=t.oxw();return t.KtG(r.saveList(o))}),t.qZA()}}function j(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,r=t.oxw();return t.KtG(r.updateList(o))}),t.qZA()}}function K(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,r=t.oxw();return t.KtG(r.destroyList(o))}),t.qZA()}}function X(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,r=t.oxw();return t.KtG(r.deleteSavedList(o))}),t.qZA()}}function V(s,n){if(1&s&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"titlecase"),t.qZA(),t.YNc(7,H,4,4,"td",1),t.YNc(8,z,3,3,"td",1),t.TgZ(9,"td"),t._UZ(10,"button",21),t.YNc(11,$,1,0,"button",22),t.YNc(12,j,1,0,"button",23),t.YNc(13,K,1,0,"button",24),t.YNc(14,X,1,0,"button",25),t.qZA()()),2&s){const e=n.$implicit,i=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,9,e.title)),t.xp6(3),t.Oqu(t.lcZ(6,11,e.description)),t.xp6(2),t.Q6J("ngIf",i.authorColumn),t.xp6(1),t.Q6J("ngIf",i.modeColumn),t.xp6(2),t.Q6J("routerLink","/user/"+e.username+"/list/"+e.user_list_count),t.xp6(1),t.Q6J("ngIf",i.buttons.like&&e.username!==(null==i.userAuth?null:i.userAuth.username)),t.xp6(1),t.Q6J("ngIf",i.buttons.edit),t.xp6(1),t.Q6J("ngIf",i.buttons.delete&&!i.reservedLists.includes(e.user_list_count)),t.xp6(1),t.Q6J("ngIf",i.buttons.dislike)}}function W(s,n){if(1&s&&(t.TgZ(0,"a",34),t._uU(1,"Ver todas las listas"),t.qZA()),2&s){const e=t.oxw(3);t.Q6J("routerLink","/user/"+(null==e.userLists?null:e.userLists.username)+"/lists")}}function tt(s,n){if(1&s&&(t.TgZ(0,"div",32),t._uU(1),t.YNc(2,W,2,1,"a",33),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.hij(" En total tienes ",e.lists?e.lists.length:0," listas."),t.xp6(1),t.Q6J("ngIf",!e.paginator)}}function et(s,n){1&s&&t.YNc(0,tt,3,2,"ng-template",31)}function st(s,n){1&s&&(t.TgZ(0,"small",43),t._uU(1,"Title is required."),t.qZA())}function it(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"div",35)(1,"label",36),t._uU(2,"Title"),t.qZA(),t.TgZ(3,"input",37),t.NdJ("ngModelChange",function(o){t.CHM(e);const r=t.oxw();return t.KtG(r.list.title=o)}),t.qZA(),t.YNc(4,st,2,0,"small",38),t.qZA(),t.TgZ(5,"div",35)(6,"label",39),t._uU(7,"Description"),t.qZA(),t.TgZ(8,"textarea",40),t.NdJ("ngModelChange",function(o){t.CHM(e);const r=t.oxw();return t.KtG(r.list.description=o)}),t.qZA()(),t.TgZ(9,"div",35)(10,"h5",41),t._uU(11,"P\xfablico"),t.qZA(),t.TgZ(12,"p-inputSwitch",42),t.NdJ("ngModelChange",function(o){t.CHM(e);const r=t.oxw();return t.KtG(r.list.public=o)}),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.list.title)("disabled",e.reservedLists.includes(e.list.user_list_count)),t.xp6(1),t.Q6J("ngIf",e.submitted&&!e.list.title),t.xp6(4),t.Q6J("ngModel",e.list.description),t.xp6(4),t.Q6J("ngModel",e.list.public)}}function nt(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.hideDialog())}),t.qZA(),t.TgZ(1,"button",45),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.storeList())}),t.qZA()}}const ot=function(){return["title","description","author","public"]},w=function(){return{width:"450px"}};let v=(()=>{class s{constructor(e,i,o,r,p){this.ls=e,this.messageService=i,this.confirmationService=o,this.titleCasePipe=r,this.store=p,this.buttonAddList=!1,this.buttonEditList=!1,this.buttonDeleteList=!1,this.buttonDeleteSavedList=!1,this.authorColumn=!0,this.modeColumn=!0,this.rows=10,this.paginator=!0,this.list={},this.listDialog=!1,this.submitted=!1,this.reservedLists=[1,2,3,4,5,6,7,8,9,10],this.isLoggedIn=!1,this.isLoggedOut=!0,this.userAuth=void 0,this.subscriptions=[],this.buttons={create:!1,edit:!1,delete:!1,like:!1,dislike:!1}}ngOnInit(){this.subscriptions.push(this.store.select("auth").subscribe(({user:e,isLoggedIn:i})=>{this.userAuth=e,this.isLoggedIn=i,this.isLoggedOut=!i,this.buttons={...this.buttons,create:this.buttonAddList,edit:this.buttonEditList,delete:this.buttonDeleteList,like:this.isLoggedIn&&!this.buttonDeleteSavedList,dislike:this.buttonDeleteSavedList}}))}ngOnDestroy(){A(this.subscriptions)}openNew(){this.list={},this.submitted=!1,this.listDialog=!0}updateList(e){this.list={...e},this.listDialog=!0}destroyList(e){this.confirmationService.confirm({message:"\xbfEst\xe1s seguro de querer eliminar la lista "+e.title+"?",header:"Confirmar",icon:"pi pi-exclamation-triangle",acceptLabel:"Aceptar",rejectLabel:"Cancelar",accept:()=>{this.lists=this.lists?.filter(i=>i.id!==e.id),this.store.dispatch(C.SN({list:e})),this.messageService.add({severity:"success",summary:"Eliminado",detail:`Lista ${e.title} eliminada.`,life:3e3})}})}hideDialog(){this.listDialog=!1,this.submitted=!1}storeList(){this.submitted=!0,this.list.title.trim()&&(void 0!==this.list.id?(this.lists[this.findIndexById(this.list.id)]=this.list,this.store.dispatch(C.Du({list:this.list})),this.messageService.add({severity:"success",summary:"Actualizada",detail:"Lista actualizada",life:3e3})):(this.list.username=this.userAuth?.username,this.store.dispatch(C.$l({list:this.list})),this.lists.push(this.list),this.messageService.add({severity:"success",summary:"Creado",detail:`Lista ${this.list.title} creada.`,life:3e3})),this.showChanges())}showChanges(){this.listDialog=!1,this.list={}}saveList(e){this.ls.saveList(e).subscribe({next:i=>{this.messageService.add({severity:"success",summary:"Guardada",detail:`Lista ${e.title} de ${this.titleCasePipe.transform(e.username)} guardada.`,life:3e3})}})}deleteSavedList(e){this.confirmationService.confirm({message:"\xbfEst\xe1s seguro de querer eliminar la lista "+e.title+" de "+this.titleCasePipe.transform(e.username)+" de tu colecci\xf3n?",header:"Confirmar",icon:"pi pi-exclamation-triangle",acceptLabel:"Aceptar",rejectLabel:"Cancelar",accept:()=>{this.lists=this.lists?.filter(i=>i.id!==e.id),this.ls.deleteSavedList(e),this.messageService.add({severity:"success",summary:"Eliminado",detail:`Lista ${e.title} eliminada.`,life:3e3})}})}findIndexById(e){let i=-1;for(let o=0;o<this.lists.length;o++)if(this.lists[o].id==e){i=o;break}return i}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(h.X),t.Y36(d.ez),t.Y36(d.YP),t.Y36(u.rS),t.Y36(g.yh))},s.\u0275cmp=t.Xpm({type:s,selectors:[["component-list-table"]],inputs:{lists:"lists",userLists:"userLists",buttonAddList:"buttonAddList",buttonEditList:"buttonEditList",buttonDeleteList:"buttonDeleteList",buttonDeleteSavedList:"buttonDeleteSavedList",authorColumn:"authorColumn",modeColumn:"modeColumn",rows:"rows",paginator:"paginator"},features:[t._Bn([u.rS])],decls:12,vars:17,consts:[[1,"card","col-12","mb-3"],[4,"ngIf"],["responsiveLayout","scroll","dataKey","id","currentPageReportTemplate","Mostrando desde la lista {first} a la {last} de {totalRecords} listas.",3,"value","rows","paginator","globalFilterFields","rowHover","showCurrentPageReport"],["dt",""],["pTemplate","header"],["pTemplate","body"],["header","Datos de la lista","styleClass","p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["pTemplate","left"],["pButton","","pRipple","","label","Nueva lista","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pSortableColumn","title"],["field","title"],["pSortableColumn","description"],["field","description"],["pSortableColumn","author",4,"ngIf"],["pSortableColumn","public",4,"ngIf"],["pSortableColumn","author"],["field","author"],["pSortableColumn","public"],["field","public"],["pButton","","pRipple","","icon","pi pi-eye",1,"p-button-rounded","mr-2",3,"routerLink"],["pButton","","pRipple","","icon","pi pi-heart","class","p-button-rounded p-button-warning mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-pencil","class","p-button-rounded p-button-success mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash","class","p-button-rounded p-button-warning",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash","class","p-button-rounded p-button-danger",3,"click",4,"ngIf"],[1,"author",3,"routerLink"],["pButton","","pRipple","","icon","pi pi-heart",1,"p-button-rounded","p-button-warning","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"],["pTemplate","summary"],[1,"flex","align-items-center","justify-content-between"],[3,"routerLink",4,"ngIf"],[3,"routerLink"],[1,"field"],["for","title"],["type","text","pInputText","","id","title","required","","autofocus","",3,"ngModel","disabled","ngModelChange"],["class","p-error",4,"ngIf"],["for","description"],["id","description","pInputTextarea","","required","","rows","3","cols","20",3,"ngModel","ngModelChange"],[1,"m-0","mb-1"],[3,"ngModel","ngModelChange"],[1,"p-error"],["pButton","","pRipple","","label","Cancelar","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Guardar","icon","pi pi-check",1,"p-button-text",3,"click"]],template:function(e,i){1&e&&(t._UZ(0,"p-toast"),t.TgZ(1,"div",0),t.YNc(2,E,2,0,"p-toolbar",1),t.TgZ(3,"p-table",2,3),t.YNc(5,G,10,2,"ng-template",4),t.YNc(6,V,15,13,"ng-template",5),t.YNc(7,et,1,0,null,1),t.qZA()(),t.TgZ(8,"p-dialog",6),t.NdJ("visibleChange",function(r){return i.listDialog=r}),t.YNc(9,it,13,5,"ng-template",7),t.YNc(10,nt,2,0,"ng-template",8),t.qZA(),t._UZ(11,"p-confirmDialog")),2&e&&(t.xp6(2),t.Q6J("ngIf",i.buttons.create),t.xp6(1),t.Q6J("value",i.lists)("rows",i.rows)("paginator",i.paginator)("globalFilterFields",t.DdM(14,ot))("rowHover",!0)("showCurrentPageReport",!0),t.xp6(4),t.Q6J("ngIf",null==i.userLists?null:i.userLists.username),t.xp6(1),t.Akn(t.DdM(15,w)),t.Q6J("visible",i.listDialog)("modal",!0),t.xp6(3),t.Akn(t.DdM(16,w)))},dependencies:[u.O5,d.jx,T.Hq,c.rH,c.yS,N.FN,m.iA,m.lQ,m.fz,S.V,O.o,Q.o,R.Q,U.g,q.Ql,a.Fj,a.JJ,a.Q7,a.On,u.rS],styles:["[_nghost-%COMP%]     .author{cursor:pointer}[_nghost-%COMP%]     .author:hover{color:#848888}"]}),s})();var I=l(4247),lt=l(5054);function rt(s,n){1&s&&t._UZ(0,"p-image",12)}function at(s,n){if(1&s&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"async"),t.qZA()),2&s){const e=t.oxw(2);let i;t.xp6(1),t.Oqu(null==(i=t.lcZ(2,1,e.dashboardUser))||null==i.user?null:i.user.description)}}function ct(s,n){if(1&s&&(t.TgZ(0,"textarea",13),t._uU(1),t.ALo(2,"async"),t.qZA()),2&s){const e=t.oxw(2);let i;t.Q6J("autoResize",!0),t.xp6(1),t.Oqu(null==(i=t.lcZ(2,2,e.dashboardUser))||null==i.user?null:i.user.description)}}function ut(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.changeDataUser())}),t.qZA()}}function pt(s,n){if(1&s&&(t.TgZ(0,"main",2)(1,"p-card",3),t.YNc(2,rt,1,0,"ng-template",4),t.qZA(),t.TgZ(3,"p-card",5)(4,"form",6)(5,"h1"),t._uU(6),t.ALo(7,"titlecase"),t.ALo(8,"async"),t.qZA(),t.YNc(9,at,3,3,"p",7),t.YNc(10,ct,3,4,"textarea",8),t.YNc(11,ut,1,0,"button",9),t.qZA()(),t.TgZ(12,"p-card",10)(13,"h1"),t._uU(14,"Listas"),t.qZA(),t._UZ(15,"component-list-table",11),t.ALo(16,"async"),t.ALo(17,"async"),t.qZA()()),2&s){const e=t.oxw();let i,o,r;t.xp6(4),t.Q6J("formGroup",e.profileForm),t.xp6(2),t.Oqu(t.lcZ(7,10,null==(i=t.lcZ(8,12,e.dashboardUser))||null==i.user?null:i.user.username)),t.xp6(3),t.Q6J("ngIf",!e.ownProfile),t.xp6(1),t.Q6J("ngIf",e.ownProfile),t.xp6(1),t.Q6J("ngIf",e.ownProfile),t.xp6(4),t.Q6J("lists",null==(o=t.lcZ(16,14,e.dashboardUser))?null:o.list)("userLists",null==(r=t.lcZ(17,16,e.dashboardUser))?null:r.user)("rows",5)("paginator",!1)("authorColumn",!1)}}let dt=(()=>{class s{constructor(e,i,o,r,p,L){this.ar=e,this.us=i,this.ls=o,this.router=r,this.fb=p,this.store=L,this.error=(0,b.of)(!1),this.ownProfile=!1,this.userData={}}ngOnInit(){this.subs=this.store.select("auth").subscribe(({user:e})=>{this.userData={...e},this.dashboardUser=this.ar.params.pipe((0,Z.b)(500),(0,y.w)(({username:i})=>(this.ownProfile=i===e?.username,(0,J.D)({user:this.us.getUser(void 0,i).pipe((0,Y.j)(0)),list:this.ls.getMovieLists(void 0,i).pipe((0,y.w)(o=>(0,b.of)(this.ownProfile?o:o.filter(r=>r.public))))}))),(0,M.b)(({user:i})=>{this.profileForm=this.fb.group({description:[i?.description||"",[a.kI.required,a.kI.minLength(3)]]})}),(0,D.K)(()=>(this.router.navigateByUrl("not-found"),(0,b.of)({user:void 0}))))})}ngOnDestroy(){this.subs.unsubscribe()}changeDataUser(){if(this.profileForm.valid){const e=this.profileForm.get("description")?.value;this.userData.description=e,this.store.dispatch((0,F.$5)({user:this.userData}))}}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(c.gz),t.Y36(_.u),t.Y36(h.X),t.Y36(c.F0),t.Y36(a.qu),t.Y36(g.yh))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-user-dashboard"]],decls:4,vars:5,consts:[[1,"grid"],["class","lg:col-8 lg:col-offset-2 col-12 col-offset-0 grid","style","padding: 1em",4,"ngIf"],[1,"lg:col-8","lg:col-offset-2","col-12","col-offset-0","grid",2,"padding","1em"],["styleClass","avatar",1,"md:col-5","col-12"],["pTemplate","content"],["styleClass","userinfo",1,"md:col-7","col-12"],["action","",3,"formGroup"],[4,"ngIf"],["rows","5","cols","30","pInputTextarea","","formControlName","description",3,"autoResize",4,"ngIf"],["pButton","","pRipple","","type","button","label","Cambiar descripci\xf3n","class","p-button-rounded",3,"click",4,"ngIf"],[1,"col-12"],[3,"lists","userLists","rows","paginator","authorColumn"],["src","https://www.kindpng.com/picc/m/21-214439_free-high-quality-person-icon-default-profile-picture.png","alt","Image","width","100%"],["rows","5","cols","30","pInputTextarea","","formControlName","description",3,"autoResize"],["pButton","","pRipple","","type","button","label","Cambiar descripci\xf3n",1,"p-button-rounded",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,pt,18,18,"main",1),t.ALo(2,"async"),t.ALo(3,"async"),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",!t.lcZ(2,1,i.error)&&t.lcZ(3,3,i.dashboardUser)))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,v,I.Z,d.jx,lt.E,T.Hq,U.g,u.Ov,u.rS],styles:["[_nghost-%COMP%]     .avatar{overflow:hidden;display:flex;justify-content:center;align-items:center;height:400px}[_nghost-%COMP%]     .avatar .p-card-body{height:100%}[_nghost-%COMP%]     .avatar .p-card-body .p-card-content{overflow:hidden;height:100%;padding:0}[_nghost-%COMP%]     .avatar .p-card-body .p-card-content .p-image{width:100%}@media (max-width: 480px){[_nghost-%COMP%]     .avatar{height:350px}}[_nghost-%COMP%]     textarea{width:100%}"]}),s})(),mt=(()=>{class s{constructor(e,i){this.activatedRoute=e,this.ls=i,this.lists=[]}ngOnInit(){this.activatedRoute.params.subscribe(({username:e})=>{this.ls.getSavedLists(e).subscribe(i=>{this.lists=i})})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(c.gz),t.Y36(h.X))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-saved-lists"]],decls:4,vars:3,consts:[[1,"grid"],[1,"lg:col-8","lg:col-offset-2","col-12","col-offset-0","grid",2,"padding","1em"],[1,"card","col-12"],[3,"lists","buttonDeleteSavedList","modeColumn"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"main",1)(2,"div",2),t._UZ(3,"component-list-table",3),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("lists",i.lists)("buttonDeleteSavedList",!0)("modeColumn",!1))},dependencies:[v]}),s})();var ht=l(6518),gt=l(3608);function ft(s,n){1&s&&(t.TgZ(0,"tr")(1,"th",6),t._uU(2,"Nombre de usuario "),t._UZ(3,"p-sortIcon",7),t.qZA(),t._UZ(4,"th"),t.qZA())}function bt(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td"),t._UZ(5,"button",8),t.TgZ(6,"button",9),t.NdJ("click",function(){const r=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.cancelSuscrption(r.id))}),t.qZA()()()}if(2&s){const e=n.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,e.username)),t.xp6(3),t.Q6J("routerLink","/user/"+e.username)}}function _t(s,n){if(1&s&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.hij(" En total sigues a ",e.users?e.users.length:0," usuarios. ")}}const Ct=function(){return["username"]};let Tt=(()=>{class s{constructor(e,i,o){this.as=e,this.crud=i,this.messageService=o,this.rows=10,this.paginator=!0}ngOnInit(){}cancelSuscrption(e){this.crud.cancelFollow(e).subscribe({next:i=>{this.users=this.users?.filter(o=>o.id!==e),this.messageService.add({severity:"warn",summary:"Suscripci\xf3n cancelada"})}})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(ht.e),t.Y36(_.u),t.Y36(d.ez))},s.\u0275cmp=t.Xpm({type:s,selectors:[["component-user-table"]],inputs:{users:"users",rows:"rows",paginator:"paginator"},decls:6,vars:7,consts:[[1,"card","col-12","mb-3"],["responsiveLayout","scroll","dataKey","id","currentPageReportTemplate","Mostrando desde el usuario {first} al {last} de {totalRecords} usuarios que sigues.",3,"value","rows","paginator","globalFilterFields","rowHover","showCurrentPageReport"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["pSortableColumn","username"],["field","title"],["pButton","","pRipple","","icon","pi pi-eye","pTooltip","Ver usuario",1,"p-button-rounded","mr-2",3,"routerLink"],["pButton","","pRipple","","icon","pi pi-user-minus","pTooltip","Dejar de seguir",1,"p-button-rounded","p-button-danger",3,"click"],[1,"flex","align-items-center","justify-content-between"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"p-table",1,2),t.YNc(3,ft,5,0,"ng-template",3),t.YNc(4,bt,7,4,"ng-template",4),t.YNc(5,_t,2,1,"ng-template",5),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("value",i.users)("rows",i.rows)("paginator",i.paginator)("globalFilterFields",t.DdM(6,Ct))("rowHover",!0)("showCurrentPageReport",!0))},dependencies:[d.jx,T.Hq,c.rH,gt.u,m.iA,m.lQ,m.fz,u.rS]}),s})(),vt=(()=>{class s{constructor(e,i){this.activatedRoute=e,this.cs=i,this.followers=[]}ngOnInit(){this.activatedRoute.params.subscribe(({username:e})=>{this.cs.getUserFollowers(e).subscribe(i=>this.followers=i)})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(c.gz),t.Y36(_.u))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-follows"]],decls:3,vars:1,consts:[[1,"grid"],[1,"lg:col-8","lg:col-offset-2","col-12","col-offset-0","grid",2,"padding","1em"],[1,"col-12",3,"users"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"main",1),t._UZ(2,"component-user-table",2),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("users",i.followers))},dependencies:[Tt]}),s})(),Lt=(()=>{class s{constructor(e,i,o){this.activatedRoute=e,this.store=i,this.ls=o,this.lists=[],this.permission=!1,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.store.subscribe(({auth:e,list:i})=>{e.guest?(this.lists=[...i.lists],this.permission=!0):this.getCollection(e.user)}))}ngOnDestroy(){A(this.subscriptions)}getCollection(e){this.subscriptions.push(this.activatedRoute.params.subscribe(({username:i})=>{this.permission=e?.username===i,this.subscriptions.push(this.ls.getMovieLists(e?.username!==i||void 0,i).subscribe(o=>{this.lists=o,this.permission?this.lists=o:o.forEach(r=>{r.public&&this.lists.push(r)})}))}))}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(c.gz),t.Y36(g.yh),t.Y36(h.X))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-lists"]],decls:4,vars:5,consts:[[1,"grid"],[1,"lg:col-8","lg:col-offset-2","col-12","col-offset-0","grid",2,"padding","1em"],[1,"card","col-12"],[3,"lists","buttonAddList","buttonEditList","buttonDeleteList","authorColumn"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"main",1)(2,"div",2),t._UZ(3,"component-list-table",3),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("lists",i.lists)("buttonAddList",i.permission)("buttonEditList",i.permission)("buttonDeleteList",i.permission)("authorColumn",!1))},dependencies:[v]}),s})();var xt=l(3747),Zt=l(3334),yt=l(2665);function At(s,n){if(1&s&&t._UZ(0,"component-small-info-card",4),2&s){const e=n.$implicit,i=t.oxw();t.Q6J("content",e)("crud",i.authorColumn)("type",e.type)("deleteButton",!0)}}function Ut(s,n){1&s&&(t.TgZ(0,"div",5),t._UZ(1,"p-message",6),t.qZA())}let wt=(()=>{class s{constructor(e,i,o,r){this.activatedRoute=e,this.ls=i,this.cs=o,this.store=r,this.contentCpllection=[],this.authorColumn=!1}ngOnInit(){this.activatedRoute.params.subscribe(({username:e,listId:i})=>{this._list={user_list_count:i,username:e},this.store.select("auth").pipe((0,Z.b)(500)).subscribe(({user:o})=>{this.authorColumn=o?.username===this._list.username,this.store.select("list").subscribe(()=>{this.ls.getMovieLists(void 0,this._list.username,this._list.user_list_count).subscribe(r=>{this.contentCpllection=this.extractContent(r[0],this.authorColumn)})})})})}extractContent(e,i){const o=JSON.parse(e.contentId);let r=[];return o.forEach(p=>{if(1==e.public||i){let L=p.includes("tv")?"tv":"movie";this.cs.getMovieOrTvshowsById(p).subscribe(Ft=>r.push({...Ft,type:L}))}}),r}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(c.gz),t.Y36(h.X),t.Y36(xt._),t.Y36(g.yh))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-list"]],decls:4,vars:2,consts:[[1,"grid"],[1,"lg:col-10","lg:col-offset-1","col-12","grid",2,"margin","0 auto"],["class","lg:col-2 md:col-3 sm:col-4 col-12",3,"content","crud","type","deleteButton",4,"ngFor","ngForOf"],["class","col-12",4,"ngIf"],[1,"lg:col-2","md:col-3","sm:col-4","col-12",3,"content","crud","type","deleteButton"],[1,"col-12"],["severity","info","text","La lista no tiene contenido","styleClass","mr-2"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"main",1),t.YNc(2,At,1,4,"component-small-info-card",2),t.YNc(3,Ut,2,0,"div",3),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngForOf",i.contentCpllection),t.xp6(1),t.Q6J("ngIf",0===(null==i.contentCpllection?null:i.contentCpllection.length)))},dependencies:[u.sg,u.O5,Zt.U,yt.q],styles:["[_nghost-%COMP%]     .p-inline-message{margin:0 auto;width:100%}"]}),s})(),f=(()=>{class s{constructor(e,i){this.router=e,this.store=i,this._isLoggedIn=!1}ngOnInit(){}ngOnDestroy(){this.subs.unsubscribe()}canActivate(e,i){return this.subs=this.store.select("auth").subscribe(({isLoggedIn:o})=>{this._isLoggedIn=o}),!!this._isLoggedIn||(this.router.navigateByUrl(""),!1)}canLoad(e,i){return this.subs=this.store.select("auth").subscribe(({isLoggedIn:o})=>{this._isLoggedIn=o}),!!this._isLoggedIn||(this.router.navigateByUrl(""),!1)}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(c.F0),t.LFG(g.yh))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const It=[{path:"",children:[{path:":username",component:dt},{path:":username/lists",component:Lt},{path:":username/follows",component:vt,canLoad:[f],canActivate:[f]},{path:":username/lists/saved",component:mt,canLoad:[f],canActivate:[f]},{path:":username/list/:listId",component:wt}]}];let Jt=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[c.Bz.forChild(It),c.Bz]}),s})();var Yt=l(4466),Mt=l(6266);let Dt=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[u.ez,a.UX,Jt,Yt.m,a.u5,Mt.W,I.d]}),s})()}}]);